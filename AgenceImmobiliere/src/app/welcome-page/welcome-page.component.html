<section class="banner">
  <div class="banner-content d-flex flex-column align-items-center justify-content-center text-center">
    <h1 class="banner-title">Nouveautés immobilières</h1>
  </div>
</section>

<section class="search-options py-5">
  <div class="container">
    <h2 class="text-center mb-5">QUE RECHERCHEZ-VOUS ?</h2>
    <div class="row">
      <div class="col-md-5">
        <a class="search-card achat-card d-flex align-items-center justify-content-center text-center"
           (click)="filterByType('MAISON')" style="cursor: pointer;">
          <h3 class="search-card-title">Maison</h3>
        </a>
      </div>
      <div class="col-md-5">
        <a class="search-card location-card d-flex align-items-center justify-content-center text-center"
           (click)="filterByType('APPARTEMENT')" style="cursor: pointer;">
          <h3 class="search-card-title">Appartement</h3>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Après la section search-options et avant la liste des propriétés -->
<section class="filters py-4">
  <div class="container">
    <div class="filter-card">
      <h5 class="filter-title">Filtres</h5>
      <div class="filter-grid">
        <!-- Type de propriété -->
        <div class="filter-item">
          <label class="filter-label">Type de bien</label>
          <select class="filter-select" [(ngModel)]="filters.propertyType" (change)="applyFilters()">
            <option value="">Tous les types</option>
            <option *ngFor="let type of propertyTypes" [value]="type">{{type}}</option>
          </select>
        </div>

        <!-- Nombre de chambres -->
        <div class="filter-item">
          <label class="filter-label">Chambres</label>
          <select class="filter-select" [(ngModel)]="filters.bedrooms" (change)="applyFilters()">
            <option value="">Tous</option>
            <option *ngFor="let option of bedroomOptions" [value]="option">{{option}}</option>
          </select>
        </div>

        <!-- Surface -->
        <div class="filter-item">
          <label class="filter-label">Surface min (m²)</label>
          <input type="number" class="filter-input" [(ngModel)]="filters.minSurface" 
                 (input)="applyFilters()" placeholder="Min">
        </div>

        <div class="filter-item">
          <label class="filter-label">Surface max (m²)</label>
          <input type="number" class="filter-input" [(ngModel)]="filters.maxSurface" 
                 (input)="applyFilters()" placeholder="Max">
        </div>

        <!-- Localisation -->
        <div class="filter-item">
          <label class="filter-label">Localisation</label>
          <select class="filter-select" [(ngModel)]="filters.location" (change)="applyFilters()">
            <option value="">Toutes les villes</option>
            <option *ngFor="let location of locations" [value]="location">{{location}}</option>
          </select>
        </div>
      </div>

      <!-- Bouton réinitialiser -->
      <div class="filter-actions">
        <button class="reset-button" (click)="resetFilters()">
          Réinitialiser les filtres
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Liste des propriétés avec spinner -->
<section class="properties py-5">
  <div class="container">
    <!-- Spinner -->
    <div class="text-center" *ngIf="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Chargement...</span>
      </div>
    </div>

    <!-- Liste des propriétés -->
    <div class="row g-4" *ngIf="!loading">
      <div class="col-md-4" *ngFor="let property of displayedProperties">
        <div class="card h-100" (click)="navigateToDetails(property.id)" style="cursor: pointer;">
          <img [src]="property.images[0]" class="card-img-top" [alt]="property.titre">
          <div class="card-body">
            <h5 class="card-title">{{property.titre}}</h5>
            <p class="card-text">
              {{property.chambres}} chambres • {{property.sallesDeBain}} sdb • {{property.surface}}m²
            </p>
            <p class="card-text">
              <strong>Prix: </strong>
              <span *ngIf="property.type === 'MAISON'">{{property.prix | currency:'EUR':'symbol'}} €</span>
              <span *ngIf="property.type === 'APPARTEMENT'">{{property.prix | currency:'EUR':'symbol'}} € /mois</span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<app-contact-info></app-contact-info>

<!-- Ajoutez ces styles CSS -->
<style>
.filters .card {
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.filters .form-label {
  font-size: 0.9rem;
  color: #6c757d;
}

.filters .form-select,
.filters .form-control {
  border-radius: 6px;
}

.filters .btn {
  padding: 0.5rem 1rem;
  border-radius: 6px;
}
</style>


